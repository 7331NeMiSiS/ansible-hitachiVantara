-
  name: create storage command device for each of the storage systems defined in storage.json file.
  hosts: localhost
  collections:
    - hitachi.storage
  gather_facts: false
  vars_files:
    - ./storage.json
  tasks:
    - hv_cmddev:
        state : 'present'
        sanStorageSystems: '{{ sanStorageSystems }}'
        hitachiAPIGatewayService: '{{ hitachiAPIGatewayService }}'
        vCenterVMName: '{{ vCenterVMName | default(omit) }}'
        vCenterIP: '{{ vCenterIP | default(omit) }}'
        vCenterKey: '{{ vCenterKey | default(omit) }}'
        vCenterCluster: '{{ vCenterCluster | default(omit) }}'
        vCenterUser: '{{ vCenterUser | default(omit) }}'
      register: result
    - debug: var=result
