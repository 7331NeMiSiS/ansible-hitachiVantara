-
  name: Update Storage Pool deduplication
  hosts: localhost
  collections:
    - hitachi.storage
  gather_facts: false
  vars:
    - enable_deduplication: true
    - storage_pool_id: storagepool-c244dec065003ab5ee83bd8d02588b6b
    - storage_serial: 12345
  tasks:
    - hv_storage_replication:
        state: present
        copy_type: tc
        action_type: split
        storage_serial: '{{ storage_serial }}'
        data:
          enable_deduplication: '{{ enable_deduplication }}'
          storage_pool_id: '{{ storage_pool_id | default(omit) }}'
      register: result
    - debug: var=result.storagePool

