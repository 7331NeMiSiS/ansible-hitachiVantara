-
  name: Create multiple GAD Pairs with target pool id
  hosts: localhost
  gather_facts: false
  vars:
    - storage_serial: 12345
    - luns:
      - 1631
      - 1632
      - 1633    
    - target_pool_id: 26
    - quorum_disk_id: 20
  tasks:
    - hv_rep:
        state: present
        storage_serial: '{{ storage_serial }}'
        data:
          copy_type: gad

          lun: '{{ item }}'
          target_pool_id: '{{target_pool_id}}'
          quorum_disk_id: '{{ quorum_disk_id }}'

          target_host_group: '{{ target_host_group | default(None)}}'
          target_storage_serial: '{{ target_storage_serial | default(None)}}'
          target_resource_group_id: '{{ target_resource_group_id | default(None)}}'
          consistency_group_id: '{{consistency_group_id  | default(None) }}'
          allocate_consistency_group: '{{allocate_consistency_group | default(None)}}'
          copy_pace: '{{ copy_pace | default(None)}}'

      with_items: '{{ luns }}'
      register: result
    - debug: var=result
