-
  name: Testing Create VSM
  hosts: localhost
  gather_facts: false
  vars:
    - state: present
    - virtual_storage_serial: 12345
    - model: VSP_F400
    - meta_resources:
      - 
        serial: 12345
        name: ansible-12345
        host_groups:
          -
            port: CL2-B
            host_group_names:
              - HITACHI_HG1
              - HITACHI_HG2
              - HITACHI_HG3
        parity_groups:
          - 5-5
        ports:
          - CL8-B
        luns:
          - 679
          - 680
          - 682
  tasks:
    - hv_vsm:
        state: present
        virtual_storage_serial: '{{ virtual_storage_serial }}'
        physical_storage_serial: '{{ physical_storage_serial | default(None) }}'
        data:
          model: '{{ model }}'
          state: '{{ state | default(None) }}'
          meta_resources: '{{ meta_resources }}'
      register: result
    - debug: var=result
