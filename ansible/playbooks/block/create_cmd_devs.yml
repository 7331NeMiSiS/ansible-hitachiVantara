-
  name: create storage command device for each of the storage systems defined in storage.json file.
  hosts: localhost
  gather_facts: false
  vars:
    - isPhysical: 'false'
    - cmdDevicePhysicalServerIp: 10.10.10.40
    - cmdDevicePhysicalServerUser: uuu
    - cmdDevicePhysicalServerKey: ppp
    - NOTE: for security reason, remove the key after usage
  vars_files:
    - ./storage.json
  tasks:
    - hv_cmddev:
        state : 'present'
        isPhysical: '{{ isPhysical  | default(omit) }}'
        cmdDevicePhysicalServerIp: '{{ cmdDevicePhysicalServerIp  | default(omit) }}'
        cmdDevicePhysicalServerUser: '{{ cmdDevicePhysicalServerUser  | default(omit) }}'
        cmdDevicePhysicalServerKey: '{{ cmdDevicePhysicalServerKey  | default(omit) }}'
        hostPorts: '{{ hostPorts  | default(omit) }}'
        hostGroup: '{{ hostGroup  | default(omit)  }}'
        hostMode: '{{ hostMode  | default(omit) }}'
        sanStorageSystems: '{{ sanStorageSystems }}'
        hitachiAPIGatewayService: '{{ hitachiAPIGatewayService }}'
        hitachiAPIGatewayServiceUser: '{{ hitachiAPIGatewayServiceUser  | default(omit) }}'
        vCenterVMName: '{{ vCenterVMName | default(omit) }}'
        vCenterVMHostIpAddress: '{{ vCenterVMHostIpAddress | default(omit) }}'
        vCenterIP: '{{ vCenterIP | default(omit) }}'
        vCenterKey: '{{ vCenterKey | default(omit) }}'
        vCenterCluster: '{{ vCenterCluster | default(omit) }}'
        vCenterUser: '{{ vCenterUser | default(omit) }}'
      register: result
    - debug: var=result