apiVersion: v1
kind: Secret
metadata:
  name: alertmanager-main
  namespace: monitoring
stringData:
  alertmanager.yaml: "global:\n  # The smarthost and SMTP sender used for mail notifications.\n  smtp_smarthost: 'localhost:25'\n  smtp_from: 'alertmanager@hitachivantara.com'\n  smtp_auth_username: 'alertmanager'\n  smtp_auth_password: 'password'\n\n# The directory from which notification templates are read.\ntemplates: \n- '/etc/alertmanager/template/*.tmpl'\n\n# The root route on which each incoming alert enters.\nroute:\n  # The labels by which incoming alerts are grouped together. For example,\n  # multiple alerts coming in for cluster=A and alertname=LatencyHigh would\n  # be batched into a single group.\n  #\n  # To aggregate by all possible labels use '...' as the sole label name.\n  # This effectively disables aggregation entirely, passing through all\n  # alerts as-is. This is unlikely to be what you want, unless you have\n  # a very low alert volume or your upstream notification system performs\n  # its own grouping. Example: group_by: [...]\n  group_by: ['alertname', 'cluster', 'service']\n\n  # When a new group of alerts is created by an incoming alert, wait at\n  # least 'group_wait' to send the initial notification.\n  # This way ensures that you get multiple alerts for the same group that start\n  # firing shortly after another are batched together on the first \n  # notification.\n  group_wait: 30s\n\n  # When the first notification was sent, wait 'group_interval' to send a batch\n  # of new alerts that started firing for that group.\n  group_interval: 5m\n\n  # If an alert has successfully been sent, wait 'repeat_interval' to\n  # resend them.\n  repeat_interval: 3h \n\n  # A default receiver\n  receiver: triangulum-mails\n\n  # All the above attributes are inherited by all child routes and can \n  # overwritten on each.\n\n  # The child route trees.\n  routes:\n  # This routes performs a regular expression match on alert labels to\n  # catch alerts that are related to a list of services.\n  # All alerts with service=infrastructure-opeartor or service=ucp or service=triangulum\n  - match_re:\n      service: ^(ucp|triangulum|infrastructure-operator)$\n    receiver: triangulum-webhook \n    # The service has a sub-route for critical alerts, any alerts\n    # that do not match, i.e. severity != critical, fall-back to the\n    # parent node and are sent to 'triangulum-webhook'\n    routes:\n    - match:\n        severity: critical\n      receiver: triangulum-webhook\n\n  # All alerts with service=infrastructure-opeartor or service=ucp or service=triangulum\n  - match_re:\n      service: ^(ucp|triangulum|infrastructure-operator)$\n    receiver: triangulum-mails\n    # The service has a sub-route for critical alerts, any alerts\n    # that do not match, i.e. severity != critical, fall-back to the\n    # parent node and are sent to '-X-mails'\n    routes:\n    - match:\n        severity: critical\n      receiver: triangulum-mails\n\n\n# Inhibition rules allow to mute a set of alerts given that another alert is\n# firing.\n# We use this to mute any warning-level notifications if the same alert is \n# already critical.\ninhibit_rules:\n- source_match:\n    severity: 'critical'\n  target_match:\n    severity: 'warning'\n  # Apply inhibition if the alertname is the same.\n  # CAUTION: \n  #   If all label names listed in `equal` are missing \n  #   from both the source and target alerts,\n  #   the inhibition rule will apply!\n  equal: ['alertname', 'cluster', 'service']\n\n\nreceivers:\n- name: 'triangulum-webhook'\n  webhook_configs:\n  - url: 'http://localhost:9393/v1/receiver'\n\n- name: 'triangulum-mails'\n  email_configs:\n  - to: vivek.reddy@hitachivantara.com\n    from: vivek.reddy@hitachivantara.com\n    # Your smtp server address\n    smarthost: 172.25.58.51:25\n    #auth_username: vivek.reddy@hitachivantara.com\n    #auth_identity: vivek.reddy@hitachivantara.com\n    #auth_password: y0ur-v3ry-h@rd-p@ssw0rd\n  pagerduty_configs:\n\n\n- name: 'default'\n  email_configs:\n  - to: vivek.reddy@hitachivantara.com\n    from: vivek.reddy@hitachivantara.com\n    # Your smtp server address\n    smarthost: 172.25.58.51:25\n    #auth_username: vivek.reddy@hitachivantara.com\n    #auth_identity: vivek.reddy@hitachivantara.com\n    #auth_password: y0ur-v3ry-h@rd-p@ssw0rd\n"
type: Opaque
