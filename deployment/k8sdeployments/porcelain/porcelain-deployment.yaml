apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: porcelain
  name: porcelain
spec:
  replicas: 1
  selector:
    matchLabels:
      app: porcelain
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: porcelain
    spec:
      containers:
      - env:
        - name: JAVA_OPTS
          value: -Djdk.tls.client.protocols=TLSv1.2
        - name: K8S_API_SERVER
          value: https://kubernetes.default.svc:443
        - name: TASKS_API_SERVER
          value: http://tasks.ucp.svc.cluster.local:23017
        - name: PROMETHEUS_SERVER_ADDRESS
          value: http://prometheus-k8s.monitoring.svc
        image: triangulum-docker-dev-sc.repo.sc.eng.hitachivantara.com/triangulum-docker-dev-sc:porcelain-latest
        imagePullPolicy: Always
        name: porcelain
        ports:
        - containerPort: 23015
        resources: {}
        volumeMounts: 
        - name: porcelain-logs
          mountPath: /home/logs
        - mountPath: /home/tls.crt
          name: tls-cert
      restartPolicy: Always
      serviceAccountName: ""
      volumes:
      - name: tls-cert
        hostPath:
          path: /home/conf/certs/server.crt
          type: File
      - name: porcelain-logs
        persistentVolumeClaim:
          claimName: pvc-porcelain
status: {}
